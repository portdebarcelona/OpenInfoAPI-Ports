openapi: '3.0.3'
info:
  version: '1.0.0'
  title: API Vessels in Port info
  description: 
    Vessels that are anchored/moored in the port. 
  license:
    name: CC0 1.0 Universal (CC0 1.0)
    url: https://creativecommons.org/publicdomain/zero/1.0/deed.es
  contact:
    name: OpenInfoAPI github
    url: https://github.com/portdebarcelona/OpenInfoAPI-Ports
tags:
  - name: Vessels in Port details
    description: "Vessels that are anchored/moored in the port."
servers:
  - url: https://api.server.test/v1
paths:
  /shipsInPort:
    get:
      summary: Returns a list of ships that are anchored or moored now in a Port.
      description: Returns a list of ships that are anchored or moored now in a Port.
      parameters:
        - $ref: '#/components/parameters/portCode'
      responses: #status code
        '200':
          description: Successful operation
          headers:
            API-Version:
              $ref: './oiapComponents.yml#/components/headers/API-Version'
            Current-Page:
              $ref: './oiapComponents.yml#/components/headers/Current-Page'
            Next-Page:
              $ref: './oiapComponents.yml#/components/headers/Next-Page'
            Prev-Page:
              $ref: './oiapComponents.yml#/components/headers/Prev-Page'
            Last-Page:
              $ref: './oiapComponents.yml#/components/headers/Last-Page'
            First-Page:
              $ref: 'oiapComponents.yml#/components/headers/First-Page'
          content: 
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/shipInPort'
        default:
          description: Unexpected error
          headers:
            API-Version:
              $ref: './oiapComponents.yml#/components/headers/API-Version'
          content:
            application/json:
              schema:
                $ref: 'oiapComponents.yml#/components/schemas/error'                
components:
  parameters: 
    ##################
    # Query parameters
    ##################
    portCode:
      in: query
      name: portCode
      description: |
            Port UN/LOCODE. 
            Default value is Locode of Port what provides the services. 
            Example: portCode=ESBCN        
      required: false
      style: form
      explode: false
      schema:
        $ref: './oiapComponents.yml#/components/schemas/portCode'
  schemas: 
    shipInPort:
      description: list of ships that now are in Port
      type: object
      allOf:
        - type: object
          properties:
            shipIMONumber:
              $ref: './oiapComponents.yml#/components/schemas/shipIMONumber'
        - type: object
          properties:
            shipName:
              $ref: './oiapComponents.yml#/components/schemas/shipName'
        - type: object
          properties:
            shipType:
              $ref: './oiapComponents.yml#/components/schemas/shipType'
        - type: object
          properties:
            actualTimeOfArrival:
              $ref: './oiapComponents.yml#/components/schemas/actualTimeOfArrival'
        - type: object
          properties:
            estimatedTimeOfDeparture:
              $ref: './oiapComponents.yml#/components/schemas/estimatedTimeOfDeparture'
        - type: object
          properties:
            berth:
              $ref: './oiapComponents.yml#/components/schemas/berth'
        - type: object
          properties:
            lastPortOfCall:
              $ref: './oiapComponents.yml#/components/schemas/lastPortOfCall'       
      required: 
        - shipIMONumber
        - shipName
        - shipType
        - actualTimeOfArrival
        - estimatedTimeOfDeparture 