openapi: '3.0.3'
info:
  version: '0.9.0-oas3'
  title: OIAP Components
  description: |
    **Open Info API para Puertos**


    List of components that are used in the APIs developed for the Open Info API para Puertos project.
  license:
    name: CC0 1.0 Universal (CC0 1.0)
    url: https://creativecommons.org/publicdomain/zero/1.0/deed.es
  contact:
    name: OpenInfoAPI github
    url: https://github.com/portdebarcelona/OpenInfoAPI-Ports
# servers:
#  - url: https://github.com/portdebarcelona/OpenInfoAPI-Ports/blob/develop/oasdefinitions/
paths:
  /resADir:
    get:
      summary: Logs out current logged in user session
      description: ''
      operationId: logoutUser
      responses:
        default:
          description: successful operation 
components:
  headers: 
    currentPage: 
        description: A link to the current page.
        schema: 
            type: string
            example: fE9mZnNldHw9MCZsaW1pdD01
        required: true
    nextPage: 
        description: A link to the next page. Next-Page header link MAY be omitted if the current page is the last page.
        schema:
            type: string
            example: fE9mZnNldHw9NSZsaW1pdD01
        required: false
    prevPage:
        description: A link to the previous page. Previous-Page header link MAY be omitted if the current page is the first page.
        schema: 
            type: string
            example: fE9mZnNldHw9MCZsaW1pdD01
        required: false
    lastPage: 
        description: A link to the last page. Last-Page header link MAY be omitted if the current page is the last page.
        schema: 
            type: string
            example: fE9mZnNldHw9NTkmbGltaXQ9NQ==
        required: false
    firstPage: 
        description: A link to thefirst page. First-Page header link MAY be omitted if current page is the first page.
        schema: 
            type: string
            example: fE9mZnNldHw9NjAmbGltaXQ9NQ==
        required: false
    oiapApiVersion:
        description: SemVer used to indicate the version of the contract (API version) returned.
        schema: 
            type: string
            example: 0.9.0-oas3
  schemas:
    # Reference components
    id:
      description: |
            Unique identifier of an element of a dataset.
      type: string
      maxLength: 35
      example: XAC12345CA
    uri:
      description: |
            The Uniform Resource Identifier (URI) is a unique sequence of characters that identifies a logical or physical resource used by web technologies.
      type: string
    validationKey:
      description: |
            The code received to complete a subscription process.
      type: string
      example: '4ZT2'
    # Persons
    contactInfo:
      description: email or phone
      type: string
    email:
      description: email
      type: string
    phone:
      description: phone number 
      type: string
    name:
      description: name
      type: string
    surname:
      description: surname
      type: string      
    company:
      description: 
        Company
      type: object
      properties:
        companyName:
          type: string 
          description: Name of the company
        companyCode:
          type: string
          description: VAT code of the company
      required:
        - companyName   
    language:
      description: |
            The ISO 639 code of a language. Each language is assigned a two-letter (639-1) lowercase abbreviation.
            E.g. `ca` Catalan.
      type: string
      maxLength: 2
      example: ca 
    # Location components
    locode:
      description: UN/LOCODE of a location as specified in the UN/ECE Recommendation nº16
      type: string
      maxLength: 5
    portCode:
      description: |
            Port UN/LOCODE
      type: string
      maxLength: 5
      example: ESBCN 
    lastPortOfCall:
      description: |
            UN/LOCODE of the last POrt of Call
      type: string
      maxLength: 5
      example: HKHKG 
    nextPortOfCall:
      description: UN/LOCODE from next port of call. 
      type: string
      maxLength: 5
      example: NLRTM
    placeOfDeparture:
      description: Name of the place of departure. 
      type: object
      anyOf:
        - type: object
          properties:
            code:
              description: Code of the place of departure.  
              type: string
              maxLength: 5
        - type: object
          properties:
            description:
              description: Name of the place of departure.  
              type: string
              maxLength: 35
    placeOfDestination:
      description: Name of the place of destination. 
      type: object
      anyOf:
        - type: object
          properties:
            code:
              description: Code of the place of destination.  
              type: string
              maxLength: 5
        - type: object
          properties:
            description:
              description: Name of the place of destination.  
              type: string
              maxLength: 35
    # Ship components
    shipIMONumber:
      description: The identifier of ship.
      type: string
      maxLength: 7 
      example: 9876543 
    shipName:
      description: The ship’s name shown on the IMO ship’s certificates.
      type: string
      maxLength: 35
      example: AURORA 
    shipType:
      description: >
            The type of the ship. The value is populated using the 2 character code from Annex 2 from UN/ECE Recommendation Nº28 when the means of transport is 1 (maritime).
            E.g.  50 Is the code  for a General cargo vessel. A vessel designed to carry general cargo.
              * `50`	General cargo vessel	Vessel designed to carry general cargo.
              * `51`	Unit carrier	Vessel designed to carry unit loads
              * `52`	Bulk carrier	Vessel designed to carry bulk cargo.
              * `53`	Tanker	Vessel solely equipped with tanks to carry cargo.
              * `54`	Liquefied gas tanker	Tanker designed to carry liquefied gas.
              * `55`	Other special tanker	Tanker designed to carry other special liquids.
              * `57`	Cargo and passenger vessel	Vessel designed to carry cargo and passengers.
              * `59`	Passenger ship	Vessel designed to carry more than 12 passengers.
              * `60`	Assistance vessel	Vessel designed to give assistance.
              * `70`	Other sea-going vessel	Sea-going vessel, not otherwise specified.
              * `72`	Work ship	Vessel designed to assist in work.
              * `73`	Push boat	Vessel designed to push other vessels.
              * `74`	Dredger	Vessel designed to scoop or suck mud or sand.
              * `75`	Fishing boat	Vessel designed for fishing.
              * `76`	Research and education ship	Vessel designed for research and education.
              * `77`	Navy vessel	Vessel operated by a Navy.
              * `78`	Structure, floating	Any floating structure.
              * `80`	Pleasure boat	Vessel designed for recreation.
              * `81`	Speedboat	Vessel designed for speed, often used for recreation.
              * `82`	Sailing boat with auxiliary motor	Vessel designed primarily for sailing outfitted with an auxiliary motor.
              * `83`	Sailing yacht	A specific type of vessel mostly used for pleasure and designed for sailing.
              * `84`	Boat for sport fishing	Vessel designed for sport fishing.
              * `85`	Craft, pleasure, longer than 20 metres	Vessel longer than 20 metres, designed for recreation.
              * `89`	Craft, other, recreational	Vessel designed for recreation, not otherwise specified.
              * `90`	Fast ship	Fast, all-purpose vessel.
              * `91`	Hydrofoil	Vessel with wing-like structure for skimming at high speed.
              * `92`	Catamaran, fast	Fast vessel designed with two parallel hulls.   
      type: string
      maxLength: 2
      example: 50    
      enum: [50, 51, 52, 53, 54, 55, 57, 59, 60, 70, 72, 73, 74, 75, 76, 77, 78, 80, 81, 82, 83, 84, 85, 89, 90, 91, 92]
    # Train components
    trainType:
      description: >
            The type of the train. The value is populated using the following enumeration:
              * `Containers`	General cargo vessel	Vessel designed to carry general cargo.
              * `Vehicles`	Unit carrier	Vessel designed to carry unit loads
              * `Bulk`	Bulk carrier	Vessel designed to carry bulk cargo.
              * `Tanker`	Tanker	Vessel solely equipped with tanks to carry cargo. 
      type: string
      maxLength: 35
      example: "Containers"    
      enum: ["Containers", "Vehicles", "Bulk", "Tanker"]  
    # Partners      
    companyName: #Revisar
      type: string
      description: Name of a company.
    ferryOperator:
      type: object
      description: 
        Identification of the company that operates a ferry.  
      properties:
        code:
          description: Operator code. Code assigned to a ferry operator.  
          type: string
          example: GRM
        description:
          description: Name of the ferry operator. 
          type: string
          example: GRIMALDI 
      required:
        - description
    cruiseLine:
      type: object
      description: 
        Identification of the company that operates the cruise ship.  
      properties:
        code:
          description: Operator code. Code assigned to a cruise line.  
          type: string
          example: COSTA
        description:
          description: Name of the cruise line. 
          type: string
          example: COSTA CRUCEROS 
      required:
        - description
    # Date and time components
    startDate:  
      description: The start date of a period. The value is populated in ISO 8601 Date format.
      type: string
      format: date
      example: 2020-04-06
    dateRange: 
      description: 
            The duration of a time period. It is populated in ISO 8601 duration format. E.g. 4 weeks and 2 days is represented as P4W2D
      type: string
      format: iso8601
      example: P4W  
    estimatedTimeOfArrival:  
      description: The date and time the means of transport is estimated to arrive at a specified location (ETA), in ISO 8601 Date format.
      type: string
      format: date
      example: 2022-03-15 11:53
    actualTimeOfArrival:  
      description: The date and time the means of transport arrives at a specified location (ATA), in ISO 8601 Date format.
      type: string
      format: date
      example: 2022-01-24 21:53
    estimatedTimeOfDeparture:  
      description: The date and time the means of transport is estimated to depart from a specified location (ETD), in ISO 8601 Date format.
      type: string
      format: date
      example: 2022-04-08 12:00
    actualTimeOfDeparture:  
      description: The date and time the means of transport departs from a specified location (ATD), in ISO 8601 Date format.
      type: string
      format: date
      example: 2022-01-25 10:06      
    fromDate:  
      description: The initial date of a periode of time.
      type: string
      format: date
      example: 2022-01-20 
    startTime:  
      description: The initial date of a periode of time.
      type: string
      format: date
      example: 2022-01-20 
    endTime:  
      description: The final date of a periode of time.
      type: string
      format: date
      example: 2022-01-20 
    # Rail transport components
    railService:      
      type: string
      description: Code that identifies a rail service.     
    railwayStationNearestCity:
      type: string
      description: Name of the nearest city to a railway station.
    railTerminalLocode:
      type: string
      description: UN/LOCODE of a rail terminal. 
    railTerminalCode: 
      type: string
      description: Code that identifies a railway terminal. 
      example: ESCRB
    railTerminalName: 
      type: string
      description: Name of a railway terminal. 
      example: Zaragoza-Corbera-Alta  
    railDirection:  
      type: string
      enum: [UP, DOWN]
      example: UP
      description: > 
        Direction of a train:
          * `UP` - Up or inbound is used for trains that are coming to a port.
          * `DOWN` - Down or outbound is used for trains that are leaving a port. 
    # Infrastructure components
    berth:
      type: object
      description: 
        Identification of a berth from a port.  
      properties:
        code:
          description: Berth code. Code assigned to a berth from a port.  
          type: string
          example: 01B 
        description:
          description: Berth name. 
          type: string
          example: ADOSSAT 
        berthCoordinates:
          $ref: '#/components/schemas/coordinates'
      required:
        - code
    channel:
      type: object
      description: 
        Identification of a port channel.  
      properties:
        code:
          description: Channel code. Code assigned to a port channel.  
          type: string
          example: NE 
        description:
          description: Channel name. 
          type: string
          example: North East entrance 
        channelCoordinates:
          $ref: '#/components/schemas/coordinates'
      required:
        - code

    facility:
      type: object
      description: 
        Identification of a port facility.  
      properties:
        code:
          description: Facility code. Code assigned to a facility from a port.  
          type: string
          example: 08MBCN
        description:
          description: Facility name. 
          type: string
          example: TERMINAL CREUERS
        berth:
          $ref: '#/components/schemas/berth' 
      required:
        - description
    # Notices and news
    noticeLanguage:
      description: Language used to write a notice. 
      $ref: '#/components/schemas/language'
    newsLanguage:
      description: Language used to write news. 
      $ref: '#/components/schemas/language'
    publishingStage:  
      description: > 
        Stages of a publishing process:
          * `ACTIVE` - Element that is active
          * `EXPIRED` - Element that has expired 
      type: string
      enum: [ACTIVE, EXPIRED]
    subject:
      description: Subject of a publication.      
      type: string
    content:
      description: Content of a publication. 
      type: string
    noticeCategory:
      description: Category of a publication. 
      type: string
      example: 'Ship arrival'
    newsCategory:
      description: Category of a publication. 
      type: string
      example: 'Traffic'
    # Subscriptions
    subscriptionReference:
      description: Response after a subscription request has been received
      type: object
      properties:
        subscriptionRequestReference:
          $ref: '#/components/schemas/subscriptionRequestReference'
        subscriptionRequestMessage:
          $ref: '#/components/schemas/subscriptionRequestMessage'
    subscriptionRequestReference: 
      type: string
      example: '2022-02-07T17:05:12_REF001'
    subscriptionRequestMessage:
      type: string 
      example: 'Your subscription request has been received and soon you will receive a validation code (email/sms)'
    unsubscriptionRequestReference: 
      type: string
      example: '2022-02-10T17:05:12_UNS056'
    unsubscriptionRequestMessage:
      type: string 
      example: 'Your unsubscription request has been received and soon you will receive a validation code (email/sms)'
    unsubscriptionReference:
      description: Response after an unsubscription request has been received
      type: object
      properties:
        unsubscriptionRequestReference:
          $ref: '#/components/schemas/unsubscriptionRequestReference'
        unsubscriptionRequestMessage:
          $ref: '#/components/schemas/unsubscriptionRequestMessage'
    # Error schemas
    error:
      type: object
      description: 
        Error body
      properties:
        code:
          type: string 
          description: Code that identifies an error.
          example: Error code
        message:
          type: string
          description: Message describing an error.
          example: Error description
      required:
        - code
        - message
# https://service.unece.org/trade/uncefact/vocabulary/rec20/
# https://service.unece.org/trade/uncefact/vocabulary/rec21/
# https://service.unece.org/trade/uncefact/vocabulary/unlocode-CC/  (CC is 2a ISO3166 country code)
    linerServiceName: 
      description: Name of a Liner Service, as it is refered in Alphaliner
      type: string
      maxLength: 50 
      example: New Eurosal / EuroAndes  
    linerServiceCode: 
      description: Code of a Liner Service, as it is refered in Alphaliner
      type: string
      maxLength: 4 
      example: 6513
    linerServiceType: 
      description: >
            Type of Liner Service, coded. 
              * `FC`	Full container - Containership.
              * `CC`  Car-carrier.
              * `RR`  Ro-Ro.
              * `MP`  Multipurpose
      type: string
      maxLength: 2 
      example: FC
    linerServiceCapacity: 
      description: Capacity of a liner service, expressed in units according to the typology of the liner service. Units are TEUs for containerships, cars for car-carriers and LIMs (lanes in meters) for ro-ro vessels. 
      type: string
      example: 23064 TEU
    linerCarrier: 
      description: Liner carrier
      properties:
        carrierName:
          description: Carrier name 
          type: string
          example: Mediterranean Shipping Company (MSC)
        carrierCode:
          description: Carrier code as Standard Carrier Alpha Code (SCAC) 
          type: string
          example: MSCU
    linerSlot: 
      description: Code of a Liner Slot
      type: string
      example: MSC
    linerSailingFrequency: 
      description: Frequency of a liner service, expressed in days
      type: string
      example: 7
    linerDurationOfRotation: 
      description: Duration of the liner service rotation, expressed in days
      type: string
      example: 43   
    coastalArea: 
      description: >
            MARITIME COASTAL AREAS The nomenclature to be used is the Geonomenclature (the nomenclature of countries and territories for the external trade statistics of the Union and statistics of trade between Member States) (1) in force in the year to which the data refer. The code consists of four digits: the ISO alpha 2 standard code for each country from the abovementioned nomenclature, followed by two zeros (e.g. code GR00 for Greece), except for countries which are divided into two or more maritime coastal areas, which are identified by a fourth digit other than zero (from 1 to 7)Name of a geographical area, based on the Nomenclature of Countries and Territories for the European statistics on international trade in goods and on the geographical breakdown for other business statistics.            
      maxLength: 4
      example: GR00  
    countryCode: 
      description: >
            Country code as a 2 alpha characters from ISO3166.            
      maxLength: 2
      example: GR 
    linkedPort: 
      description: 'Port that is served by a direct service of a liner and do not requires a transshipment.'
      properties:
        portCode:
          example: SGSGP
          $ref: '#/components/schemas/portCode' 
        portName:
          type: string 
          example: Singapore
    linkedPortCode: 
      description: 'Port UN/LOCODE served by a liner.'
      example: SGSGP
      $ref: '#/components/schemas/portCode'
    gate: 
      description: 'Attributes of an access gate.'
      properties:
        gateName:
          description: Name of a gate. 
          type: string
        gateCoordinates:
          description: Coordinates of a gate. 
          $ref: '#/components/schemas/coordinates'
    coordinates: 
      description: >
        Either of the two lines of latitude and longitude whose intersection determines the geographical point of a place.
      properties:
        latitude:
          description: latitude of a point. 
          type: number
          example: 42.234
        longitude:
          description: Longitude of a point 
          type: number
          example: -122.521

    markRegion: 
      description: >
            Mark region, according to the IALA/AISM Maritime Buoyage System nd Other Aids to Navigation. 
              * In `Region A` red colour is used for port and green colour starboard. 
              * In `Region B` green colour is used for port and red colour starboard. 
      type: string
      enum: [Region A, Region B]
      example: Region A
    markType: 
      description: >
            Type of marks, according to the IALA/AISM Maritime Buoyage System and Other Aids to Navigation.  
              * `Lateral Marks`
              * `Cardinal Marks`
              * `Isolated Danger Mark`
              * `Safe Waters Mark`
              * `Marking New Dangers`
              * `Other Marks`
      type: string
      enum: [Lateral Marks, Cardinal Marks, Isolated Danger Mark, Safe Waters Mark, Marking New Dangers, Other Marks]
      example: Isolated Danger Mark
    markTop: 
      description: Upper part of a mark. It can be one or two spheres, cilinders, cones or crosses.
      type: string
      example: Two black spheres.
    markColour: 
      description: Mark colour.
      type: string
      example: Red and white vertical stripes.
    shapeOfBuoy: 
      description: Distinctive shape for identification of a mark.
      type: string
      example: Conical shape.
    markLight: 
      description: Characteristics of a mark light.
      properties:
        colour:
          description: Colour 
          type: string
          example: red
        rhythm:
          description: Rhythm of the light and dark periodes of a mark light. 
          type: string
          example: group flashing (2)
    underwaterDepth:
      description: Bathymetric information. Depth expessed in meters. It must be used positive numbers. 
      type: number
      example: 12.5

    singularPoint:
      description: A singular point of the port waters. It can be used to specify a point where bathymetric data is vailable. 
      oneOf:
        - $ref: '#/components/schemas/berth'
        - $ref: '#/components/schemas/channel' 